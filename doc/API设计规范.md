### 制订的 api 规范是什么？

重要的 API 规范包括下面几点：

- 修订历史，包括，修订说明以及 API 的向下兼容
- 接口描述
- 服务接入，描述了接口的形式（RPC，HTTP）（RPC 远程过程调用），接口地址，基本服务信息，客户端配置信息等
- 数据模型，路径与查询字符串参数模型，请求体参数模型，响应体参数模型
- 请求参数
- 返回参数
- 对接示例
- 状态码
- 业务码

#### REST 接口

REST 是一种架构设计风格，提供了设计原则和约束条件。通过 HTTP 协议定义的通用动词方法(GET、PUT、DELETE、POST) ，以 URI 对网络资源进行唯一标识，响应端根据请求端的不同需求，通过无状态通信，对其请求的资源进行表述。

需要注意的点：
在设计 RESTful API 的时候，特别是对外的 API，通常需要考虑 API 多版本的问题。API 会进行升级，客户端处于不可控的状态，所以，服务端需要支持对不同版本 API 的支持，同时，客户端在调用 API 的时候也需要指定特定的版本号，以确保调用过程正常进行。

#### RPC 接口

RPC 是一种通过网络从远程计算机程序上请求服务来得到计算服务或者数据服务的接口形式。不需要了解底层网络技术的协议和框架，具有简单，高效和通用的特性。

RPC 是怎么运行的：

1. 客户端调用本地的客户端存根方法，客户端存根方法会将参数打包并封装成一个或多个网络信息发送到服务端
2. 客户端存根通过系统调用，使用操作系统的 socket 接口将信息发送到服务端
3. 网络消息通过网络传输协议（TCP、UDP）传输到服务端
4. 服务端存根接受网络消息，并对其参数信息进行解码
5. 服务端存根调用服务端的方法，将从客户端获取的参数传入，获取结果后存入服务端存根
6. 服务端存根将返回值经过序列化编码后，通过一个或多个网络信息发送到客户端
7. 消息通过网络发送到客户端存根中
8. 客户端存根从本地 socket 接口中读取结果信息
9. 客户端存根获取结果后返回给客户端函数，完成远程服务调用

流行的 RPC 框架：
阿里：HSF
Google：gRPC

#### 区别

RESTful 是基于 http 协议的，RPC 是基于操作集通的 socket 接口完成客户端到服务端的消息发送

#### 优缺点

RESTful 的优点：
RESTful API 充分利用了 HTTP 协议的设计，使用面向资源的接口设计，相对传统 RPC 降低了接口设计的复杂度

RESTful 的缺点：
RESTful API 面向资源设计接口，对于一些复杂操作来说，接口设计难度将远大于 RPC 形式

RPC 的优点：

1. 方便使用 RPC 来调用远程函数，并得到对应的结果，就像调用本地方法一样
2. 编写分布式应用程序更加简单、容易，因为 RPC 将所有的网络代码都隐藏到了存根函数中，开发人员不用关注通信细节等
3. RPC 是跨语言的
4. RPC 协议性能更为高效，响应时间也更为出色

RPC 的缺点：

1. 相较于普通 RESTful API 设计来说，较为困难一些
2. 交互方式单一，不能进行复杂的多模块之间的协议交互
